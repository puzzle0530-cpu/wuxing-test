<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä½ çš„å…«å­—å¤©é€‰åŸå¸‚æ˜¯å“ªåº§ï¼Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #fff;
            overflow-x: hidden;
        }

        .container {
            max-width: 480px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
        }

        /* æ˜Ÿæ˜ŸèƒŒæ™¯è£…é¥° */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: #ffd700;
            border-radius: 50%;
            animation: twinkle 2s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        /* æ ‡é¢˜æ ·å¼ */
        .title {
            text-align: center;
            font-size: 28px;
            font-weight: bold;
            color: #ffd700;
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .subtitle {
            text-align: center;
            font-size: 14px;
            color: #aaa;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        /* å¡ç‰‡æ ·å¼ */
        .card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .card-title {
            font-size: 18px;
            font-weight: bold;
            color: #ffd700;
            margin-bottom: 15px;
        }

        /* è¾“å…¥æ¡†æ ·å¼ */
        .input-group {
            margin-bottom: 15px;
        }

        .input-label {
            font-size: 14px;
            color: #ffd700;
            margin-bottom: 8px;
            display: block;
        }

        input[type="text"],
        select {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            font-size: 14px;
            outline: none;
        }

        input[type="text"]:focus,
        select:focus {
            border-color: #ffd700;
            background: rgba(255, 255, 255, 0.15);
        }

        /* æŒ‰é’®æ ·å¼ */
        .btn {
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #ffd700 0%, #ff9500 100%);
            color: #1a1a2e;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #ffd700;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        .btn-secondary:hover {
            background: rgba(255, 215, 0, 0.1);
        }

        /* é¢˜ç›®æ ·å¼ */
        .question-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .question-number {
            color: #ffd700;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .question-text {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option {
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 215, 0, 0.2);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .option:hover {
            background: rgba(255, 215, 0, 0.2);
            border-color: #ffd700;
        }

        .option.selected {
            background: rgba(255, 215, 0, 0.3);
            border-color: #ffd700;
            color: #ffd700;
        }

        /* è¿›åº¦æ¡ */
        .progress {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #ffd700, #ff9500);
            transition: width 0.3s;
        }

        /* ç»“æœé¡µé¢ */
        .result-section {
            margin-bottom: 20px;
        }

        .result-title {
            color: #ffd700;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .result-title::before {
            content: '';
            width: 4px;
            height: 20px;
            background: #ffd700;
            border-radius: 2px;
        }

        .result-content {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            line-height: 1.6;
        }

        .wuxing-badge {
            display: inline-block;
            padding: 5px 15px;
            background: linear-gradient(135deg, #ffd700, #ff9500);
            color: #1a1a2e;
            border-radius: 20px;
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 10px;
        }

        .city-highlight {
            font-size: 24px;
            font-weight: bold;
            color: #ffd700;
            margin: 10px 0;
        }

        /* åŠ è½½åŠ¨ç”» */
        .loading {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255, 215, 0, 0.3);
            border-top-color: #ffd700;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            color: #ffd700;
            font-size: 16px;
        }

        /* éšè—å’Œæ˜¾ç¤º */
        .hidden {
            display: none !important;
        }

        /* æç¤ºä¿¡æ¯ */
        .hint {
            font-size: 12px;
            color: #888;
            margin-top: 8px;
        }

        /* æˆåŠŸæç¤º */
        .success-message {
            text-align: center;
            padding: 20px;
            color: #4ade80;
        }

        .success-icon {
            font-size: 48px;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <!-- æ˜Ÿæ˜ŸèƒŒæ™¯ -->
    <div class="stars" id="stars"></div>

    <div class="container">
        <!-- é¦–é¡µï¼šéªŒè¯ç å’Œç”Ÿæ—¥é€‰æ‹© -->
        <div id="page-home">
            <h1 class="title">ä½ çš„å…«å­—é‡Œè—ç€ä»€ä¹ˆç§˜å¯†ï¼Ÿ</h1>
            <p class="subtitle">è¾“å…¥å‡ºç”Ÿæ—¶é—´ï¼Œè§£é”ä½ çš„å‘½ç›˜è§£è¯»<br>æ‰¾åˆ°ä½ çš„å¤©é€‰åŸå¸‚</p>

            <div class="card">
                <div class="card-title">ğŸ” æˆæƒéªŒè¯ç </div>
                <div class="input-group">
                    <label class="input-label">éªŒè¯ç </label>
                    <input type="text" id="authCode" placeholder="è¯·è¾“å…¥4ä½éªŒè¯ç " maxlength="4">
                </div>
                <p class="hint">åœ¨å°çº¢ä¹¦è´­ä¹°åï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å‘é€éªŒè¯ç ç»™ä½ ï¼Œè¯·è¾“å…¥éªŒè¯ç ç»§ç»­</p>
            </div>

            <div class="card">
                <div class="card-title">ğŸ“… é€‰æ‹©å‡ºç”Ÿæ—¥æœŸ</div>
                <div class="input-group">
                    <label class="input-label">å¹´ä»½</label>
                    <select id="yearSelect"></select>
                </div>
                <div class="input-group">
                    <label class="input-label">æœˆä»½</label>
                    <select id="monthSelect"></select>
                </div>
                <div class="input-group">
                    <label class="input-label">æ—¥æœŸ</label>
                    <select id="daySelect"></select>
                </div>
            </div>

            <button class="btn btn-primary" onclick="startTest()">å¼€å§‹æµ‹è¯•</button>
        </div>

        <!-- æµ‹è¯•é¡µé¢ï¼šæ€§æ ¼æµ‹è¯• -->
        <div id="page-test" class="hidden">
            <h1 class="title">æ€§æ ¼æµ‹è¯•</h1>
            
            <div class="progress">
                <div class="progress-bar" id="progressBar" style="width: 0%"></div>
            </div>

            <div class="question-card">
                <div class="question-number" id="questionNumber">é—®é¢˜ 1/12</div>
                <div class="question-text" id="questionText">åŠ è½½ä¸­...</div>
                <div class="options" id="optionsContainer">
                    <!-- é€‰é¡¹åŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </div>

        <!-- åŠ è½½é¡µé¢ -->
        <div id="page-loading" class="loading">
            <div class="loading-spinner"></div>
            <p class="loading-text">æ­£åœ¨åˆ†æä½ çš„å‘½ç›˜...</p>
        </div>

        <!-- ç»“æœé¡µé¢ -->
        <div id="page-result" class="hidden">
            <h1 class="title">ä½ çš„å‘½ç›˜è§£è¯»</h1>
            <p class="subtitle">å‡ºç”Ÿæ—¥æœŸï¼š<span id="resultDate">-</span></p>

            <div class="result-section">
                <div class="result-title">å¹´æŸ±ä¿¡æ¯</div>
                <div class="result-content">
                    <p>å¹´æŸ±ï¼š<span id="nianzhu">-</span></p>
                    <p>å¹´å¹²äº”è¡Œï¼š<span id="niangan">-</span></p>
                    <p>å¹´æ”¯äº”è¡Œï¼š<span id="nianzhi">-</span></p>
                </div>
            </div>

            <div class="result-section">
                <div class="result-title">ä½ çš„æœ¬å‘½äº”è¡Œ</div>
                <div class="result-content">
                    <div class="wuxing-badge" id="wuxingBadge">-</div>
                    <p>äº”è¡Œå¼ºå¼±ï¼š<span id="wuxingStrength">-</span></p>
                </div>
            </div>

            <div class="result-section">
                <div class="result-title">æ€§æ ¼ç‰¹å¾</div>
                <div class="result-content" id="personalityResult">
                    åŠ è½½ä¸­...
                </div>
            </div>

            <div class="result-section">
                <div class="result-title">äº‹ä¸šå»ºè®®</div>
                <div class="result-content" id="careerResult">
                    åŠ è½½ä¸­...
                </div>
            </div>

            <div class="result-section">
                <div class="result-title">æ„Ÿæƒ…å»ºè®®</div>
                <div class="result-content" id="loveResult">
                    åŠ è½½ä¸­...
                </div>
            </div>

            <div class="result-section">
                <div class="result-title">è´¢è¿å»ºè®®</div>
                <div class="result-content" id="wealthResult">
                    åŠ è½½ä¸­...
                </div>
            </div>

            <div class="result-section">
                <div class="result-title">ğŸŒŸ ä½ çš„å¤©é€‰åŸå¸‚</div>
                <div class="result-content">
                    <div class="city-highlight" id="cityResult">-</div>
                    <p id="cityDescription"></p>
                </div>
            </div>

            <button class="btn btn-secondary" onclick="resetTest()">é‡æ–°æµ‹è¯•</button>
        </div>
    </div>

    <script>
        // ==================== å…¨å±€å˜é‡ ====================
        let currentQuestion = 0;
        let answers = [];
        let userBirthYear = '';
        let userBirthMonth = '';
        let userBirthDay = '';

        // ==================== éªŒè¯ç é…ç½® ====================
        // å›ºå®šéªŒè¯ç æ¨¡å¼
        // ä¿®æ”¹å¯†ç æ—¶ï¼Œåªéœ€ä¿®æ”¹ä¸‹é¢çš„æ•°å­—å³å¯ï¼ˆå¦‚æŠŠ '5656' æ”¹æˆ '8888'ï¼‰
        const FIXED_CODE = '3721';
        
        // éªŒè¯éªŒè¯ç 
        function validateAuthCode(code) {
            // å›ºå®šå¯†ç éªŒè¯
            return FIXED_CODE === code.trim();
        }

        // ==================== æ€§æ ¼æµ‹è¯•é¢˜ç›® ====================
        const questions = [
            {
                question: "åœ¨ä¸€ç‰‡æ£®æ—é‡Œï¼Œä½ æ›´æƒ³æˆä¸ºï¼Ÿ",
                options: [
                    { text: "åšç¡¬çš„å²©çŸ³", wuxing: "é‡‘" },
                    { text: "èŒ‚ç››çš„å¤§æ ‘", wuxing: "æœ¨" },
                    { text: "æµåŠ¨çš„æºªæ°´", wuxing: "æ°´" },
                    { text: "æ¸©æš–çš„é˜³å…‰", wuxing: "ç«" },
                    { text: "è‚¥æ²ƒçš„æ³¥åœŸ", wuxing: "åœŸ" }
                ]
            },
            {
                question: "é¢å¯¹å›°éš¾æ—¶ï¼Œä½ é€šå¸¸ä¼šï¼Ÿ",
                options: [
                    { text: "å†·é™åˆ†æï¼Œå¯»æ‰¾è§£å†³æ–¹æ¡ˆ", wuxing: "é‡‘" },
                    { text: "åšæŒä¸æ‡ˆï¼Œæ°¸ä¸æ”¾å¼ƒ", wuxing: "æœ¨" },
                    { text: "çµæ´»å˜é€šï¼Œé€‚åº”ç¯å¢ƒ", wuxing: "æ°´" },
                    { text: "å……æ»¡æ¿€æƒ…ï¼Œå‹‡æ•¢é¢å¯¹", wuxing: "ç«" },
                    { text: "ç¨³é‡è¸å®ï¼Œå¾ªåºæ¸è¿›", wuxing: "åœŸ" }
                ]
            },
            {
                question: "ä½ æ›´å–œæ¬¢å“ªç§å¤©æ°”ï¼Ÿ",
                options: [
                    { text: "æ™´æœ—å¹²çˆ½", wuxing: "é‡‘" },
                    { text: "å¾®é£ç»†é›¨", wuxing: "æœ¨" },
                    { text: "é˜´å¤©æ¹¿æ¶¦", wuxing: "æ°´" },
                    { text: "é˜³å…‰æ˜åªš", wuxing: "ç«" },
                    { text: "å¤šäº‘å‡‰çˆ½", wuxing: "åœŸ" }
                ]
            },
            {
                question: "ä½ çš„æœ‹å‹åœˆé‡Œï¼Œä½ é€šå¸¸æ˜¯ï¼Ÿ",
                options: [
                    { text: "æœ‰ä¸»è§çš„é¢†å¯¼è€…", wuxing: "é‡‘" },
                    { text: "ç§¯ææ´»è·ƒçš„å‚ä¸è€…", wuxing: "æœ¨" },
                    { text: "å–„è§£äººæ„çš„å€¾å¬è€…", wuxing: "æ°´" },
                    { text: "çƒ­æƒ…æ´‹æº¢çš„æ„ŸæŸ“è€…", wuxing: "ç«" },
                    { text: "å¯é ç¨³é‡çš„æ”¯æŒè€…", wuxing: "åœŸ" }
                ]
            },
            {
                question: "åšå†³å®šæ—¶ï¼Œä½ æ›´çœ‹é‡ï¼Ÿ",
                options: [
                    { text: "æ•ˆç‡å’Œç»“æœ", wuxing: "é‡‘" },
                    { text: "æˆé•¿å’Œå‘å±•", wuxing: "æœ¨" },
                    { text: "çµæ´»å’Œå˜é€š", wuxing: "æ°´" },
                    { text: "æ¿€æƒ…å’ŒåŠ¨åŠ›", wuxing: "ç«" },
                    { text: "ç¨³å®šå’Œå¯é ", wuxing: "åœŸ" }
                ]
            },
            {
                question: "ä½ ç†æƒ³çš„å·¥ä½œç¯å¢ƒæ˜¯ï¼Ÿ",
                options: [
                    { text: "ä¸¥è°¨æœ‰åºï¼Œè§„åˆ™æ˜ç¡®", wuxing: "é‡‘" },
                    { text: "å¼€æ”¾è‡ªç”±ï¼Œå……æ»¡æ´»åŠ›", wuxing: "æœ¨" },
                    { text: "çµæ´»å¤šå˜ï¼Œå¯Œæœ‰åˆ›æ„", wuxing: "æ°´" },
                    { text: "çƒ­æƒ…ç«äº‰ï¼ŒæŒ‘æˆ˜ä¸æ–­", wuxing: "ç«" },
                    { text: "ç¨³å®šèˆ’é€‚ï¼ŒèŠ‚å¥é€‚ä¸­", wuxing: "åœŸ" }
                ]
            },
            {
                question: "é¢å¯¹å¤±è´¥ï¼Œä½ ä¼šï¼Ÿ",
                options: [
                    { text: "æ€»ç»“æ•™è®­ï¼Œæ”¹è¿›æ–¹æ³•", wuxing: "é‡‘" },
                    { text: "ç§¯æå­¦ä¹ ï¼Œé‡æ–°å¼€å§‹", wuxing: "æœ¨" },
                    { text: "è°ƒæ•´æ–¹å‘ï¼Œå¯»æ‰¾æ–°è·¯", wuxing: "æ°´" },
                    { text: "ç‡ƒèµ·æ–—å¿—ï¼Œå†æ¬¡æŒ‘æˆ˜", wuxing: "ç«" },
                    { text: "æ²‰æ·€åæ€ï¼Œç§¯ç´¯ç»éªŒ", wuxing: "åœŸ" }
                ]
            },
            {
                question: "ä½ æ›´å–œæ¬¢å“ªç§é¢œè‰²ï¼Ÿ",
                options: [
                    { text: "ç™½è‰²æˆ–é“¶è‰²", wuxing: "é‡‘" },
                    { text: "ç»¿è‰²æˆ–é’è‰²", wuxing: "æœ¨" },
                    { text: "è“è‰²æˆ–é»‘è‰²", wuxing: "æ°´" },
                    { text: "çº¢è‰²æˆ–æ©™è‰²", wuxing: "ç«" },
                    { text: "é»„è‰²æˆ–æ£•è‰²", wuxing: "åœŸ" }
                ]
            },
            {
                question: "å‘¨æœ«ä½ æ›´æ„¿æ„ï¼Ÿ",
                options: [
                    { text: "æ•´ç†æˆ¿é—´ï¼Œè§„åˆ’ä¸‹å‘¨", wuxing: "é‡‘" },
                    { text: "æˆ·å¤–æ´»åŠ¨ï¼Œäº²è¿‘è‡ªç„¶", wuxing: "æœ¨" },
                    { text: "å®…å®¶ä¼‘æ¯ï¼Œçœ‹ä¹¦è§‚å½±", wuxing: "æ°´" },
                    { text: "èšä¼šäº¤å‹ï¼Œçƒ­é—¹ä¸€åœº", wuxing: "ç«" },
                    { text: "å®¶äººå›¢èšï¼Œæ¸©é¦¨æ—¶å…‰", wuxing: "åœŸ" }
                ]
            },
            {
                question: "ä½ å¦‚ä½•çœ‹å¾…é‡‘é’±ï¼Ÿ",
                options: [
                    { text: "æŠ•èµ„å¢å€¼ï¼Œç†è´¢æœ‰é“", wuxing: "é‡‘" },
                    { text: "å¼€æºèŠ‚æµï¼Œé‡å…¥ä¸ºå‡º", wuxing: "æœ¨" },
                    { text: "çµæ´»è¿ç”¨ï¼Œé€‚æ—¶æŠ•èµ„", wuxing: "æ°´" },
                    { text: "å¤§èƒ†æŠ•èµ„ï¼Œè¿½æ±‚å›æŠ¥", wuxing: "ç«" },
                    { text: "ç¨³å¥å‚¨è“„ï¼Œå®‰å…¨ç¬¬ä¸€", wuxing: "åœŸ" }
                ]
            },
            {
                question: "ä½ æœ€æ¬£èµçš„å“è´¨æ˜¯ï¼Ÿ",
                options: [
                    { text: "æœæ–­åšæ¯…", wuxing: "é‡‘" },
                    { text: "ä»çˆ±åŒ…å®¹", wuxing: "æœ¨" },
                    { text: "æ™ºæ…§çµæ´»", wuxing: "æ°´" },
                    { text: "çƒ­æƒ…å‹‡æ•¢", wuxing: "ç«" },
                    { text: "å¿ è¯šå¯é ", wuxing: "åœŸ" }
                ]
            },
            {
                question: "ä½ å¸Œæœ›åˆ«äººæ€ä¹ˆè¯„ä»·ä½ ï¼Ÿ",
                options: [
                    { text: "æœ‰èƒ½åŠ›ã€æœ‰é­„åŠ›", wuxing: "é‡‘" },
                    { text: "æœ‰çˆ±å¿ƒã€æœ‰åˆ›æ„", wuxing: "æœ¨" },
                    { text: "æœ‰æ™ºæ…§ã€æœ‰æ´å¯ŸåŠ›", wuxing: "æ°´" },
                    { text: "æœ‰æ¿€æƒ…ã€æœ‰æ„ŸæŸ“åŠ›", wuxing: "ç«" },
                    { text: "ç¨³é‡å¯é ã€å€¼å¾—ä¿¡èµ–", wuxing: "åœŸ" }
                ]
            }
        ];

        // ==================== äº”è¡ŒåŒ¹é…åŸå¸‚æ•°æ® ====================
        const cityData = {
            "é‡‘": {
                cities: ["ä¸Šæµ·", "æ·±åœ³"],
                description: "è¿™ä¸¤åº§åŸå¸‚å•†ä¸šç¹è£ï¼Œæœºä¼šä¼—å¤šï¼Œé€‚åˆé‡‘å‘½äººè¿½æ±‚äº‹ä¸šæˆåŠŸå’Œè´¢å¯Œç§¯ç´¯ã€‚"
            },
            "æœ¨": {
                cities: ["æ­å·", "è‹å·"],
                description: "è¿™ä¸¤åº§åŸå¸‚æœ¨æ°”å……ç›ˆï¼Œé£æ™¯ç§€ä¸½ï¼Œé€‚åˆæœ¨å‘½äººå‘å±•ï¼Œåˆ›æ„å’Œæ™ºæ…§å¾—ä»¥å……åˆ†å‘æŒ¥ã€‚"
            },
            "æ°´": {
                cities: ["æˆéƒ½", "é‡åº†"],
                description: "è¿™ä¸¤åº§åŸå¸‚æ°´ç³»å‘è¾¾ï¼Œç”Ÿæ´»æ‚ é—²ï¼Œé€‚åˆæ°´å‘½äººæ²‰æ·€æ€è€ƒï¼Œæ™ºæ…§å’Œåˆ›é€ åŠ›å¾—ä»¥å±•ç°ã€‚"
            },
            "ç«": {
                cities: ["åŒ—äº¬", "è¥¿å®‰"],
                description: "è¿™ä¸¤åº§åŸå¸‚å†å²æ‚ ä¹…ï¼Œæ–‡åŒ–åº•è•´æ·±åšï¼Œé€‚åˆç«å‘½äººå‘æŒ¥é¢†å¯¼æ‰èƒ½ï¼Œè¿½æ±‚äº‹ä¸šè¾‰ç…Œã€‚"
            },
            "åœŸ": {
                cities: ["å¹¿å·", "æ­¦æ±‰"],
                description: "è¿™ä¸¤åº§åŸå¸‚åœ°å¤„ä¸­åŸï¼Œäº¤é€šä¾¿åˆ©ï¼Œé€‚åˆåœŸå‘½äººç¨³æ­¥å‘å±•ï¼Œäº‹ä¸šå’Œç”Ÿæ´»åŒä¸°æ”¶ã€‚"
            }
        };

        // ==================== äº”è¡Œæ€§æ ¼å»ºè®®æ•°æ® ====================
        const wuxingAdvice = {
            "é‡‘": {
                personality: "ä½ åƒä¸€æŠŠé”‹åˆ©çš„å®å‰‘ï¼Œæ€§æ ¼åšæ¯…ï¼Œæœ‰å†³æ–­åŠ›ã€‚åšäº‹æœæ–­ï¼Œè¿½æ±‚å®Œç¾ï¼Œä½†æœ‰æ—¶è¿‡äºä¸¥å‰ï¼Œä¸å¤Ÿçµæ´»ã€‚",
                career: "é€‚åˆæ–¹å‘ï¼šé‡‘èã€æ³•å¾‹ã€ç®¡ç†ã€é”€å”®ã€åˆ¶é€ ä¸šï¼›é¿å¼€æ–¹å‘ï¼šè‰ºæœ¯ã€åˆ›æ„ã€æ•™è‚²",
                love: "æ€§æ ¼å±æ€§ï¼šé‡äº‹ä¸šï¼Œç†æ€§ä½†ç¼ºä¹æµªæ¼«ï¼›ä¼˜åŠ¿ï¼šè´£ä»»æ„Ÿå¼ºï¼Œèƒ½æä¾›ç¨³å®šç”Ÿæ´»ï¼›æœ€ä½³å©šé…ï¼šæœ¨å‘½äººï¼ˆæŸ”ä¸­å¸¦åˆšï¼‰æˆ–åœŸå‘½äººï¼ˆäº’è¡¥ç¨³å®šï¼‰",
                wealth: "è´¢æºï¼šæ­£è´¢è¿æ—ºï¼Œé ä¸“ä¸šæŠ€èƒ½èµšé’±ï¼›æŠ•èµ„å»ºè®®ï¼šç¨³å¥æŠ•èµ„ï¼Œä¿å®ˆç†è´¢"
            },
            "æœ¨": {
                personality: "ä½ åƒæ£®æ—ä¸­çš„å‚å¤©å¤§æ ‘ï¼Œç”Ÿå‘½åŠ›æ—ºç››ï¼ŒåšéŸ§ä¸æ‹”ã€‚æœ‰ä¸»è§ï¼Œèƒ½åšæŒï¼Œä½†æœ‰æ—¶è¿‡äºå›ºæ‰§ï¼Œä¸å¤Ÿçµæ´»ã€‚",
                career: "é€‚åˆæ–¹å‘ï¼šæ•™è‚²ã€æ–‡åŒ–ã€ä¼ åª’ã€è®¾è®¡ã€åŒ»ç–—ã€å›­æ—ã€å®¶å…·ï¼›é¿å¼€æ–¹å‘ï¼šé‡‘èã€æˆ¿åœ°äº§ã€é‡å·¥ä¸š",
                love: "æ€§æ ¼å±æ€§ï¼šé‡æ„Ÿæƒ…ï¼Œä¸“ä¸€ä½†ç¼ºä¹æµªæ¼«ï¼›ä¼˜åŠ¿ï¼šè´£ä»»å¿ƒå¼ºï¼Œèƒ½æ‰˜ä»˜ç»ˆèº«ï¼›æœ€ä½³å©šé…ï¼šç«å‘½äººï¼ˆæ¸©æš–æµªæ¼«ï¼‰æˆ–æ°´å‘½äººï¼ˆç›¸ç”Ÿç›¸æ—ºï¼‰",
                wealth: "è´¢æºï¼šæ­£è´¢è¿æ—ºï¼Œé ä¸“ä¸šèƒ½åŠ›èµšé’±ï¼›æŠ•èµ„å»ºè®®ï¼šæ•™è‚²ã€å¥åº·ã€æ–‡åŒ–äº§ä¸š"
            },
            "æ°´": {
                personality: "ä½ åƒæµåŠ¨çš„æºªæ°´ï¼Œçµæ´»å¤šå˜ï¼Œå–„äºé€‚åº”ã€‚æ™ºæ…§è¿‡äººï¼Œæ´å¯ŸåŠ›å¼ºï¼Œä½†æœ‰æ—¶è¿‡äºåœ†æ»‘ï¼Œç¼ºä¹åŸåˆ™ã€‚",
                career: "é€‚åˆæ–¹å‘ï¼šå’¨è¯¢ã€ç­–åˆ’ã€ç ”ç©¶ã€æ—…æ¸¸ã€è´¸æ˜“ã€ç‰©æµï¼›é¿å¼€æ–¹å‘ï¼šä¼ ç»Ÿåˆ¶é€ ä¸šã€å·¥ç¨‹ç±»",
                love: "æ€§æ ¼å±æ€§ï¼šå–„è§£äººæ„ï¼Œæ¸©æŸ”ä½“è´´ï¼›ä¼˜åŠ¿ï¼šåŒ…å®¹æ€§å¼ºï¼Œå–„å¤„ç†å…³ç³»ï¼›æœ€ä½³å©šé…ï¼šé‡‘å‘½äººï¼ˆåˆšæŸ”å¹¶æµï¼‰æˆ–æœ¨å‘½äººï¼ˆç›¸ç”Ÿç›¸åŠ©ï¼‰",
                wealth: "è´¢æºï¼šåè´¢è¿æ—ºï¼Œé ä¿¡æ¯å·®èµšé’±ï¼›æŠ•èµ„å»ºè®®ï¼šæ–°å…´è¡Œä¸šã€ç§‘æŠ€é¢†åŸŸ"
            },
            "ç«": {
                personality: "ä½ åƒæ¸©æš–çš„é˜³å…‰ï¼Œçƒ­æƒ…æ´‹æº¢ï¼Œå……æ»¡æ´»åŠ›ã€‚æœ‰æ¿€æƒ…ï¼Œæœ‰æ„ŸæŸ“åŠ›ï¼Œä½†æœ‰æ—¶è¿‡äºå†²åŠ¨ï¼Œç¼ºä¹è€å¿ƒã€‚",
                career: "é€‚åˆæ–¹å‘ï¼šå¨±ä¹ã€åª’ä½“ã€é”€å”®ã€å¸‚åœºè¥é”€ã€ITã€äº’è”ç½‘ï¼›é¿å¼€æ–¹å‘ï¼šä¼šè®¡ã€è¡Œæ”¿ã€ç¨³å®šç±»å·¥ä½œ",
                love: "æ€§æ ¼å±æ€§ï¼šçƒ­æƒ…æµªæ¼«ï¼Œè¡¨è¾¾ç›´æ¥ï¼›ä¼˜åŠ¿ï¼šæœ‰æ„ŸæŸ“åŠ›ï¼Œè®©äººå¿ƒåŠ¨ï¼›æœ€ä½³å©šé…ï¼šåœŸå‘½äººï¼ˆç¨³é‡è¸å®ï¼‰æˆ–é‡‘å‘½äººï¼ˆäº’è¡¥å¹³è¡¡ï¼‰",
                wealth: "è´¢æºï¼šåè´¢è¿æ—ºï¼Œé æœºä¼šèµšé’±ï¼›æŠ•èµ„å»ºè®®ï¼šé«˜é£é™©é«˜å›æŠ¥é¡¹ç›®"
            },
            "åœŸ": {
                personality: "ä½ åƒè‚¥æ²ƒçš„åœŸåœ°ï¼Œç¨³é‡è¸å®ï¼ŒåŒ…å®¹æ€§å¼ºã€‚åšäº‹è®¤çœŸï¼Œæœ‰è€å¿ƒï¼Œä½†æœ‰æ—¶è¿‡äºä¿å®ˆï¼Œç¼ºä¹åˆ›æ–°ã€‚",
                career: "é€‚åˆæ–¹å‘ï¼šæˆ¿åœ°äº§ã€å»ºç­‘ã€å†œä¸šã€ç‰©æµã€è¡Œæ”¿ã€äººäº‹ï¼›é¿å¼€æ–¹å‘ï¼šåˆ›æ„ã€è‰ºæœ¯ã€å˜åŒ–å¿«é€Ÿçš„è¡Œä¸š",
                love: "æ€§æ ¼å±æ€§ï¼šç¨³é‡å¯é ï¼Œé‡è§†å®¶åº­ï¼›ä¼˜åŠ¿ï¼šèƒ½æä¾›å®‰å…¨æ„Ÿï¼Œå–„ç»è¥å®¶åº­ï¼›æœ€ä½³å©šé…ï¼šç«å‘½äººï¼ˆå……æ»¡æ¿€æƒ…ï¼‰æˆ–æ°´å‘½äººï¼ˆåˆšæŸ”å¹¶æµï¼‰",
                wealth: "è´¢æºï¼šæ­£è´¢è¿æ—ºï¼Œé ç§¯ç´¯èµšé’±ï¼›æŠ•èµ„å»ºè®®ï¼šä¸åŠ¨äº§ã€é•¿æœŸæŠ•èµ„"
            }
        };

        // ==================== å¤©å¹²åœ°æ”¯äº”è¡Œè®¡ç®— ====================
        const tiangan = ["ç”²", "ä¹™", "ä¸™", "ä¸", "æˆŠ", "å·±", "åºš", "è¾›", "å£¬", "ç™¸"];
        const dizhi = ["å­", "ä¸‘", "å¯…", "å¯", "è¾°", "å·³", "åˆ", "æœª", "ç”³", "é…‰", "æˆŒ", "äº¥"];
        const tianganWuxing = ["æœ¨", "æœ¨", "ç«", "ç«", "åœŸ", "åœŸ", "é‡‘", "é‡‘", "æ°´", "æ°´"];
        const dizhiWuxing = ["æ°´", "åœŸ", "æœ¨", "æœ¨", "åœŸ", "ç«", "ç«", "åœŸ", "é‡‘", "é‡‘", "åœŸ", "æ°´"];

        function calculateNianzhu(year) {
            const yearIndex = (year - 4) % 60;
            const tianganIndex = yearIndex % 10;
            const dizhiIndex = yearIndex % 12;
            
            return {
                tiangan: tiangan[tianganIndex],
                dizhi: dizhi[dizhiIndex],
                tianganWuxing: tianganWuxing[tianganIndex],
                dizhiWuxing: dizhiWuxing[dizhiIndex]
            };
        }

        // ==================== åˆå§‹åŒ–æ—¥æœŸé€‰æ‹©å™¨ ====================
        function initDateSelectors() {
            const yearSelect = document.getElementById('yearSelect');
            const monthSelect = document.getElementById('monthSelect');
            const daySelect = document.getElementById('daySelect');

            // å¹´ä»½ï¼š1970-2006
            for (let i = 2006; i >= 1970; i--) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = i + 'å¹´';
                yearSelect.appendChild(option);
            }

            // æœˆä»½ï¼š1-12
            for (let i = 1; i <= 12; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = i + 'æœˆ';
                monthSelect.appendChild(option);
            }

            // æ—¥æœŸï¼š1-31
            for (let i = 1; i <= 31; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = i + 'æ—¥';
                daySelect.appendChild(option);
            }
        }

        // ==================== åˆå§‹åŒ–æ˜Ÿæ˜ŸèƒŒæ™¯ ====================
        function initStars() {
            const starsContainer = document.getElementById('stars');
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 2 + 's';
                starsContainer.appendChild(star);
            }
        }

        // ==================== å¼€å§‹æµ‹è¯• ====================
        function startTest() {
            const authCode = document.getElementById('authCode').value.trim();
            const year = document.getElementById('yearSelect').value;
            const month = document.getElementById('monthSelect').value;
            const day = document.getElementById('daySelect').value;

            // éªŒè¯ç éªŒè¯
            if (!authCode) {
                alert('è¯·è¾“å…¥éªŒè¯ç ï¼');
                return;
            }

            if (!validateAuthCode(authCode)) {
                alert('éªŒè¯ç é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥ï¼');
                return;
            }

            // ç”Ÿæ—¥éªŒè¯
            if (!year || !month || !day) {
                alert('è¯·é€‰æ‹©å®Œæ•´çš„å‡ºç”Ÿæ—¥æœŸï¼');
                return;
            }

            userBirthYear = year;
            userBirthMonth = month;
            userBirthDay = day;

            // æ˜¾ç¤ºæµ‹è¯•é¡µé¢
            document.getElementById('page-home').classList.add('hidden');
            document.getElementById('page-test').classList.remove('hidden');

            // å¼€å§‹ç­”é¢˜
            currentQuestion = 0;
            answers = [];
            showQuestion();
        }

        // ==================== æ˜¾ç¤ºé—®é¢˜ ====================
        function showQuestion() {
            const question = questions[currentQuestion];
            document.getElementById('questionNumber').textContent = `é—®é¢˜ ${currentQuestion + 1}/12`;
            document.getElementById('questionText').textContent = question.question;

            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';

            question.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                optionDiv.textContent = option.text;
                optionDiv.onclick = () => selectOption(index, option.wuxing);
                optionsContainer.appendChild(optionDiv);
            });

            // æ›´æ–°è¿›åº¦æ¡
            const progress = ((currentQuestion) / questions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        // ==================== é€‰æ‹©é€‰é¡¹ ====================
        function selectOption(index, wuxing) {
            answers.push(wuxing);
            currentQuestion++;

            if (currentQuestion < questions.length) {
                showQuestion();
            } else {
                // å®Œæˆæ‰€æœ‰é¢˜ç›®
                showLoading();
            }
        }

        // ==================== æ˜¾ç¤ºåŠ è½½é¡µé¢ ====================
        function showLoading() {
            document.getElementById('page-test').classList.add('hidden');
            document.getElementById('page-loading').style.display = 'block';

            // æ¨¡æ‹Ÿåˆ†æè¿‡ç¨‹
            setTimeout(() => {
                showResult();
            }, 2000);
        }

        // ==================== æ˜¾ç¤ºç»“æœ ====================
        function showResult() {
            document.getElementById('page-loading').style.display = 'none';
            document.getElementById('page-result').classList.remove('hidden');

            // è®¡ç®—å¹´æŸ±äº”è¡Œ
            const nianzhu = calculateNianzhu(parseInt(userBirthYear));
            document.getElementById('resultDate').textContent = `${userBirthYear}å¹´${userBirthMonth}æœˆ${userBirthDay}æ—¥`;
            document.getElementById('nianzhu').textContent = nianzhu.tiangan + nianzhu.dizhi;
            document.getElementById('niangan').textContent = nianzhu.tianganWuxing + 'å‘½';
            document.getElementById('nianzhi').textContent = nianzhu.dizhiWuxing + 'å‘½';

            // ç»Ÿè®¡ç­”æ¡ˆä¸­å„äº”è¡Œçš„æ•°é‡
            const wuxingCount = { 'é‡‘': 0, 'æœ¨': 0, 'æ°´': 0, 'ç«': 0, 'åœŸ': 0 };
            answers.forEach(wuxing => {
                wuxingCount[wuxing]++;
            });

            // æ‰¾å‡ºæœ€å¤šçš„äº”è¡Œ
            let maxCount = 0;
            let dominantWuxing = 'æœ¨'; // é»˜è®¤å€¼
            for (const wuxing in wuxingCount) {
                if (wuxingCount[wuxing] > maxCount) {
                    maxCount = wuxingCount[wuxing];
                    dominantWuxing = wuxing;
                }
            }

            // è®¡ç®—äº”è¡Œå¼ºåº¦
            const strength = Math.round((maxCount / 12) * 100);
            let strengthText = 'å¼±';
            if (strength >= 70) strengthText = 'å¼º';
            else if (strength >= 50) strengthText = 'ä¸­';

            // æ˜¾ç¤ºæœ¬å‘½äº”è¡Œ
            document.getElementById('wuxingBadge').textContent = dominantWuxing + 'å‘½äºº';
            document.getElementById('wuxingStrength').textContent = `${strengthText}ï¼ˆ${strength}åˆ†ï¼‰`;

            // æ˜¾ç¤ºæ€§æ ¼ã€äº‹ä¸šã€æ„Ÿæƒ…ã€è´¢è¿å»ºè®®
            const advice = wuxingAdvice[dominantWuxing];
            document.getElementById('personalityResult').textContent = advice.personality;
            document.getElementById('careerResult').innerHTML = `<strong>é€‚åˆæ–¹å‘ï¼š</strong>${advice.career.split('ï¼›')[0]}<br><strong>é¿å¼€æ–¹å‘ï¼š</strong>${advice.career.split('ï¼›')[1]}`;
            document.getElementById('loveResult').innerHTML = advice.love.replace(/ï¼›/g, '<br>');
            document.getElementById('wealthResult').innerHTML = advice.wealth.replace(/ï¼›/g, '<br>');

            // æ˜¾ç¤ºå¤©é€‰åŸå¸‚
            const city = cityData[dominantWuxing];
            document.getElementById('cityResult').textContent = city.cities.join('ã€');
            document.getElementById('cityDescription').textContent = city.description;
        }

        // ==================== é‡æ–°æµ‹è¯• ====================
        function resetTest() {
            currentQuestion = 0;
            answers = [];
            
            document.getElementById('page-result').classList.add('hidden');
            document.getElementById('page-home').classList.remove('hidden');
            
            // æ¸…ç©ºéªŒè¯ç 
            document.getElementById('authCode').value = '';
        }

        // ==================== é¡µé¢åˆå§‹åŒ– ====================
        window.onload = function() {
            initDateSelectors();
            initStars();
        };
    </script>
</body>
</html>